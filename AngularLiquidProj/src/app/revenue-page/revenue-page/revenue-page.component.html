<app-navigation-bar 
  [pageTitle]="'Revenue'"
  [Link1]="'Manage Users'"
  [Link1Route]="'#'"
  [Link2]="'Manage Movies'"
  [Link2Route]="'#'"
  [Link3]="'Manage TV Shows'"
  [Link3Route]="'#'"
  [Link4]="'Invoices'">
</app-navigation-bar>


<div class="container">
  <!-- Date Filter -->
  <div class="mb-4">
    <label for="dateRange" class="form-label">Select Date Range</label>
    <select class="form-select w-25" id="dateRange" [(ngModel)]="selectedDateRange" (ngModelChange)="filterData()">
      <option value="last7days">Last 7 Days</option>
      <option value="last30days">Last 30 Days</option>
      <option value="alltime">All Time</option>
    </select>
  </div>
<div class="container">
  <!-- Pie Chart -->
  <div class="chart-container">
    <ngx-charts-pie-chart
      [view]="view"
      [scheme]="colorScheme"
      [results]="pieChartData"
      [gradient]="gradient"
      [legend]="showLegend"
      [labels]="showLabels"
      [doughnut]="isDoughnut">
    </ngx-charts-pie-chart>
  </div>
</div>

  <!-- Metrics Grid -->
  <div class="row row-cols-1 row-cols-md-2 g-4 mb-4">
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Total Revenue</h5>
          <p class="card-text fs-4">${{totalRevenue | number}}</p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Movie Revenue</h5>
          <p class="card-text fs-4">${{movieRevenue | number}}</p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">TV Show Revenue</h5>
          <p class="card-text fs-4">${{tvShowRevenue | number}}</p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Total Sales</h5>
          <p class="card-text fs-4">{{totalSales.total}} (Movies: {{totalSales.movies}}, TV Shows: {{totalSales.tvShows}})</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Invoices and Buttons -->
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">Pending Invoices</h5>
      <p class="card-text fs-4">{{pendingInvoices}}</p>
    </div>
  </div>

  <div class="d-flex justify-content-center gap-2 flex-wrap">
    <button class="btn btn-primary" (click)="viewMovieSales()">View Movie Sales</button>
    <button class="btn btn-primary" (click)="viewTVShowSales()">View TV Show Sales</button>
    <button class="btn btn-primary" (click)="viewAllSales()">View All Sales</button>
    <button class="btn btn-secondary" (click)="manageInvoices()">Manage Invoices</button>
    <button class="btn btn-secondary" (click)="exportData()">Export Data</button>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  Last Updated: May 14, 2025, 07:31 PM IST
</footer>